---
phase: 03-dotfiles-management
plan: 03
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - data/dotfiles/git/gitconfig
  - data/dotfiles/git/gitignore
  - data/dotfiles/starship/starship.toml
autonomous: true

must_haves:
  truths:
    - "Gitconfig includes local file for user-specific values"
    - "Gitconfig has essential aliases (st, co, br, cm, lg, last)"
    - "Gitconfig sets sensible defaults (main branch, pull.rebase, push.autoSetupRemote)"
    - "Global gitignore covers common editor/OS/IDE files"
    - "Starship config is minimal and functional"
  artifacts:
    - path: "data/dotfiles/git/gitconfig"
      provides: "Global git configuration"
      contains: "[include]"
    - path: "data/dotfiles/git/gitignore"
      provides: "Global gitignore patterns"
      contains: ".DS_Store"
    - path: "data/dotfiles/starship/starship.toml"
      provides: "Starship prompt configuration"
      contains: "[git_branch]"
  key_links:
    - from: "data/dotfiles/git/gitconfig"
      to: "~/.gitconfig.local"
      via: "include.path"
      pattern: "path = ~/.gitconfig.local"
---

<objective>
Create git configuration and Starship prompt configuration files.

Purpose: Provides git configuration with the include pattern for local user values (name, email), and a minimal Starship prompt configuration. These complete the dotfiles that will be symlinked.

Output: Complete git and starship configurations in data/dotfiles/{git,starship}/ ready for symlinking.
</objective>

<execution_context>
@/Users/bragatte/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bragatte/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-dotfiles-management/03-CONTEXT.md
@.planning/phases/03-dotfiles-management/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create git configuration files</name>
  <files>
    data/dotfiles/git/gitconfig
    data/dotfiles/git/gitignore
  </files>
  <action>
Create git configuration files (remove .gitkeep if present):

**gitconfig** - Global git configuration:
```ini
# Global git configuration
# Symlinked to ~/.gitconfig
# User-specific values go in ~/.gitconfig.local

[include]
    path = ~/.gitconfig.local

[init]
    defaultBranch = main

[core]
    editor = vim
    autocrlf = input
    whitespace = fix
    excludesFile = ~/.config/git/ignore

[pull]
    rebase = true

[push]
    autoSetupRemote = true
    default = current

[fetch]
    prune = true

[merge]
    conflictStyle = diff3

[diff]
    colorMoved = default

[alias]
    # Status and info
    st = status
    last = log -1 HEAD
    lg = log --oneline --graph --all --decorate

    # Branching
    br = branch
    co = checkout
    sw = switch

    # Commits
    cm = commit
    ca = commit --amend

    # Staging
    aa = add --all
    ap = add --patch

    # Undo
    unstage = reset HEAD --
    discard = checkout --

[color]
    ui = auto

[help]
    autocorrect = 10
```

**gitignore** - Global gitignore patterns:
```gitignore
# Global gitignore
# Symlinked to ~/.config/git/ignore

# macOS
.DS_Store
.AppleDouble
.LSOverride
._*
.Spotlight-V100
.Trashes

# Windows
Thumbs.db
ehthumbs.db
Desktop.ini

# Linux
*~
.directory

# Editors
*.swp
*.swo
*~
.idea/
.vscode/
*.sublime-project
*.sublime-workspace

# IDEs
*.iml
.idea/
*.code-workspace

# Build artifacts
*.log
*.tmp
*.temp
.cache/

# Environment files (prevent accidental commits)
.env
.env.local
.env.*.local

# Python
__pycache__/
*.py[cod]
*.pyo
.Python
venv/
.venv/

# Node
node_modules/
npm-debug.log*
yarn-error.log*

# Rust
target/
# NOTE: Cargo.lock intentionally NOT ignored globally
# It should be committed for binaries, ignored only in libraries (per-project .gitignore)
```
  </action>
  <verify>
    - Files exist: `ls data/dotfiles/git/`
    - gitconfig has include: `rg '\[include\]' data/dotfiles/git/gitconfig`
    - gitconfig has aliases: `rg 'st = status' data/dotfiles/git/gitconfig`
    - gitignore has DS_Store: `rg 'DS_Store' data/dotfiles/git/gitignore`
    - .gitkeep removed: `[[ ! -f data/dotfiles/git/.gitkeep ]]`
  </verify>
  <done>
    - data/dotfiles/git/gitconfig exists with include pattern, aliases, sensible defaults
    - data/dotfiles/git/gitignore exists with OS, editor, IDE patterns
    - .gitkeep removed
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Starship configuration</name>
  <files>data/dotfiles/starship/starship.toml</files>
  <action>
Create data/dotfiles/starship/ directory and starship.toml:

**starship.toml** - Minimal Starship prompt config:
```toml
# Starship prompt configuration
# Symlinked to ~/.config/starship.toml
# Docs: https://starship.rs/config/

# Schema for editor completion
"$schema" = 'https://starship.rs/config-schema.json'

# Blank line between prompts for readability
add_newline = true

# Prompt format (customize as needed)
format = """
$directory\
$git_branch\
$git_status\
$cmd_duration\
$line_break\
$character"""

# Directory module
[directory]
truncation_length = 3
truncate_to_repo = true
style = "blue bold"

# Git branch
[git_branch]
format = "[$symbol$branch]($style) "
symbol = " "
style = "purple"

# Git status (show dirty/staged/untracked)
[git_status]
format = '([$all_status$ahead_behind]($style) )'
style = "red"

# Command duration (show if > 2s)
[cmd_duration]
min_time = 2000
format = "took [$duration]($style) "
style = "yellow"

# Prompt character
[character]
success_symbol = "[❯](green)"
error_symbol = "[❯](red)"

# Disable noisy modules (enable as needed)
[package]
disabled = true

[nodejs]
disabled = true

[python]
disabled = true

[rust]
disabled = true

[golang]
disabled = true
```
  </action>
  <verify>
    - Directory exists: `[[ -d data/dotfiles/starship ]]`
    - File exists: `[[ -f data/dotfiles/starship/starship.toml ]]`
    - Has git_branch: `rg '\[git_branch\]' data/dotfiles/starship/starship.toml`
    - Has schema: `rg 'schema' data/dotfiles/starship/starship.toml`
  </verify>
  <done>
    - data/dotfiles/starship/starship.toml exists
    - Minimal config with directory, git, cmd_duration
    - Noisy modules disabled by default
  </done>
</task>

<task type="auto">
  <name>Task 3: Create gitconfig.local template</name>
  <files>data/dotfiles/git/gitconfig.local.template</files>
  <action>
Create a template file that shows users what to put in ~/.gitconfig.local:

**gitconfig.local.template** - Template for local git config:
```ini
# Local git configuration template
# Copy this to ~/.gitconfig.local and fill in your values
# DO NOT commit this file with real values!

[user]
    name = Your Name
    email = your.email@example.com

# Optional: GPG signing (uncomment if using)
# [commit]
#     gpgsign = true
# [user]
#     signingkey = YOUR_GPG_KEY_ID

# Optional: Work vs personal (include based on directory)
# [includeIf "gitdir:~/work/"]
#     path = ~/.gitconfig-work
```

This template helps users understand what they need to configure locally.
  </action>
  <verify>
    - File exists: `[[ -f data/dotfiles/git/gitconfig.local.template ]]`
    - Has user section: `rg '\[user\]' data/dotfiles/git/gitconfig.local.template`
    - Has placeholder: `rg 'Your Name' data/dotfiles/git/gitconfig.local.template`
  </verify>
  <done>
    - data/dotfiles/git/gitconfig.local.template exists
    - Shows user section with placeholders
    - Comments explain optional GPG and work/personal setup
  </done>
</task>

</tasks>

<verification>
```bash
# Structure check
ls -la data/dotfiles/{git,starship}/

# Key content present
rg '\[include\]' data/dotfiles/git/gitconfig
rg 'autoSetupRemote' data/dotfiles/git/gitconfig
rg '\[git_branch\]' data/dotfiles/starship/starship.toml
```
</verification>

<success_criteria>
- Git config with include pattern for local values
- Essential aliases present (st, co, br, cm, lg, last)
- Sensible defaults (main branch, pull.rebase, push.autoSetupRemote)
- Global gitignore covers common patterns
- Starship config is minimal and functional
- Template shows users what to configure locally
</success_criteria>

<output>
After completion, create `.planning/phases/03-dotfiles-management/03-03-SUMMARY.md`
</output>
