# Requirements Archive: v3.0 Quality & Parity

**Shipped:** 2026-02-18
**Tag:** v4.0.0
**Coverage:** 16/16 requirements satisfied (100%)

---

## Flag & Boolean Correctness

- [x] **FLAG-01**: VERBOSE check usa `== "true"` em vez de `-n` em logging.sh (fix boolean bug)
  - *Outcome:* Validated. 5 string comparisons in logging.sh, 0 old -n/-z patterns.
- [x] **FLAG-02**: NONINTERACTIVE/UNATTENDED unificados via bridge em config.sh (fix propagation bug)
  - *Outcome:* Validated. Two-site bridge: config.sh for env-var path, setup.sh for -y flag path. 6 downstream consumers wired.
- [x] **FLAG-03**: Remover kite.kite do winget.txt (pacote descontinuado 2022)
  - *Outcome:* Validated. Entry removed from data/packages/winget.txt.
- [x] **FLAG-04**: ARCHITECTURE.md corrigido para refletir decisao real (no set -e per ADR-001)
  - *Outcome:* Validated. ARCHITECTURE.md and CONVENTIONS.md both accurate.

## Structure & DRY

- [x] **DRY-01**: Extrair Test-WinGetInstalled e Test-NpmInstalled para idempotent.psm1 compartilhado
  - *Outcome:* Validated. 3 functions in idempotent.psm1, 4 installers import via Import-Module.
- [x] **DRY-02**: Consolidar src/install/ e src/installers/ em um unico diretorio
  - *Outcome:* Validated. src/installers/ deleted, src/install/ is sole directory.
- [x] **DRY-03**: Eliminar definicoes de cor duplicadas em platform.sh, usar logging.sh como SSoT
  - *Outcome:* Validated. Zero color vars in platform.sh, 14 log_* calls via logging.sh SSoT.
- [x] **DRY-04**: Resolver DATA_DIR dual readonly com guard -z em packages.sh
  - *Outcome:* Validated. DATA_DIR readonly guarded with -z check.

## Windows Parity

- [x] **WPAR-01**: setup.ps1 aceita -DryRun, -Verbose, -Unattended como switches CLI
  - *Outcome:* Validated. Param block with all 3 switches + env var mapping.
- [x] **WPAR-02**: main.ps1 mostra [Step X/Y] em cada dispatch (step counters)
  - *Outcome:* Validated. 4 dispatch blocks with [Step X/Y] prefix.
- [x] **WPAR-03**: setup.ps1 mostra completion summary com profile, platform, duracao, falhas
  - *Outcome:* Validated. Show-CompletionSummary renders profile, platform, duration, failures.
- [x] **WPAR-04**: Todos os scripts PS usam [CmdletBinding()] para suporte nativo -Verbose/-Debug
  - *Outcome:* Validated. 12 [CmdletBinding()] across 5 modules, 0 on scripts (by design).

## Testing & Documentation

- [x] **TEST-01**: Unit tests para core modules via bats-core (logging, errors, idempotent, packages)
  - *Outcome:* Validated. 37/37 bats tests pass.
- [x] **TEST-02**: Lint runners locais (tools/lint.sh com ShellCheck + tools/lint.ps1 com PSScriptAnalyzer)
  - *Outcome:* Validated. tools/lint.sh checks 30 files, tools/lint.ps1 for PSScriptAnalyzer.
- [x] **DOC-01**: README documenta EXTRA_PACKAGES e SKIP_PACKAGES na secao Customization
  - *Outcome:* Validated. Table + examples + honest note about current integration status.
- [x] **DOC-02**: README inclui secao Windows Troubleshooting (execution policy, WinGet, PATH)
  - *Outcome:* Validated. 3 Windows troubleshooting items in collapsible format.

---

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| FLAG-01 | Phase 11 | Complete |
| FLAG-02 | Phase 11 | Complete |
| FLAG-03 | Phase 11 | Complete |
| FLAG-04 | Phase 11 | Complete |
| DRY-01 | Phase 12 | Complete |
| DRY-02 | Phase 12 | Complete |
| DRY-03 | Phase 12 | Complete |
| DRY-04 | Phase 12 | Complete |
| WPAR-01 | Phase 13 | Complete |
| WPAR-02 | Phase 13 | Complete |
| WPAR-03 | Phase 13 | Complete |
| WPAR-04 | Phase 13 | Complete |
| TEST-01 | Phase 14 | Complete |
| TEST-02 | Phase 14 | Complete |
| DOC-01 | Phase 14 | Complete |
| DOC-02 | Phase 14 | Complete |

---

*Archived: 2026-02-18*
