# Requirements Archive: v4.2 Terminal UX Polish

**Archived:** 2026-02-23
**Source:** 2 rounds of multi-agent review (leigo, power user, dev backend, UX designer) + cross-platform portability audit
**Core Value:** Terminal experience polido e seguro para quem fizer fork

---

## Terminal Setup

- [x] **TERM-01**: Promover terminal/ para root do projeto -- COMPLETE (moved from examples/)
- [x] **TERM-02**: MAS Oceanic Theme como preset Starship default -- COMPLETE
- [x] **TERM-03**: Shell functions system (welcome, h, cmd, mkcd) -- COMPLETE
- [x] **TERM-04**: SSoT aliases/functions em data/dotfiles/shared/ -- COMPLETE
- [x] **TERM-05**: Context-aware font config hint -- COMPLETE

## UX Polish

- [x] **UX-01**: Emoji toggle (TERMINAL_EMOJI env var + locale auto-detect) -- COMPLETE
- [x] **UX-02**: Renomear fp→preview, af→aliases (nomes canônicos) -- COMPLETE
- [x] **UX-03**: sysup como primário, bum/upall como wrappers -- COMPLETE
- [x] **UX-04**: Welcome: full na 1ª sessão, hint nas subsequentes -- COMPLETE
- [x] **UX-05**: h() com blank lines, mini-descriptions, SAFE line -- COMPLETE
- [x] **UX-06**: ASCII fallback com === e @branch -- COMPLETE

## Safety & Security

- [x] **SEC-01**: Remover cat=bat e diff=delta (quebram pipes) -- COMPLETE
- [x] **SEC-02**: curl -f no starship install (fail on HTTP errors) -- COMPLETE
- [x] **SEC-03**: grep -Fi no cmd() (previne regex injection) -- COMPLETE
- [x] **SEC-04**: dpkg -s no setup.sh (detecção confiável de pacotes) -- COMPLETE

## Portability

- [x] **PORT-01**: sh/dash guard robusto ({ return 0 || exit 0 }) -- COMPLETE
- [x] **PORT-02**: LC_CTYPE na cadeia de locale (macOS) -- COMPLETE
- [x] **PORT-03**: Normalização alias output bash vs zsh -- COMPLETE
- [x] **PORT-04**: mkdir -p sem -v (MSYS2 compat) -- COMPLETE
- [x] **PORT-05**: Windows Git Bash detection com mensagem WSL -- COMPLETE

## Descartados (decisão consciente)

- **gs colide com Ghostscript** — convenção universal, quem usa pode unalias
- **set -e/pipefail em sourced files** — afetaria shell do usuário permanentemente
- **sysup sem confirmação** — comando deliberado, prompt irritaria power users
- **fzf keybindings/history config** — fora de escopo (arquivo separado futuro)

---
*20 requirements delivered, 4 consciously deferred*
